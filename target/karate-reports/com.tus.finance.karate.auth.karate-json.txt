{"failedCount":7,"prefixedPath":"classpath:com\/tus\/finance\/karate\/auth.feature","packageQualifiedName":"com.tus.finance.karate.auth","loopIndex":-1,"relativePath":"com\/tus\/finance\/karate\/auth.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":79859000,"startTime":1743288792644,"endTime":1743288792724,"millis":79.859,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url 'http:\/\/localhost:9091'"}},{"result":{"nanos":38583400,"startTime":1743288792726,"endTime":1743288792765,"millis":38.5834,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"configure headers = { 'Content-Type': 'application\/json' }"}},{"result":{"nanos":622400,"startTime":1743288792766,"endTime":1743288792767,"millis":0.6224,"status":"passed"},"step":{"line":9,"prefix":"Given","index":0,"text":"path '\/api\/auth\/login'"}},{"result":{"nanos":442800,"startTime":1743288792766,"endTime":1743288792766,"millis":0.4428,"status":"passed"},"step":{"line":10,"prefix":"And","index":1,"text":"request { email: 'vel@example.com', password: 'vel123' }  # Use valid admin credentials"}},{"result":{"nanos":293244100,"errorMessage":"http call failed after 248 milliseconds for url: http:\/\/localhost:9091\/api\/auth\/login\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9091 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused: getsockopt\nclasspath:com\/tus\/finance\/karate\/auth.feature:11","startTime":1743288792767,"endTime":1743288793060,"millis":293.2441,"status":"failed"},"step":{"line":11,"prefix":"When","index":2,"text":"method post"},"stepLog":"22:53:13.059 org.apache.http.conn.HttpHostConnectException: Connect to localhost:9091 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused: getsockopt, http call failed after 248 milliseconds for url: http:\/\/localhost:9091\/api\/auth\/login\n22:53:13.061 classpath:com\/tus\/finance\/karate\/auth.feature:11\nWhen method post\nhttp call failed after 248 milliseconds for url: http:\/\/localhost:9091\/api\/auth\/login\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9091 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused: getsockopt\nclasspath:com\/tus\/finance\/karate\/auth.feature:11\n"},{"result":{"nanos":0,"startTime":1743288793061,"endTime":1743288793061,"millis":0.0,"status":"skipped"},"step":{"line":12,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":0,"startTime":1743288793061,"endTime":1743288793061,"millis":0.0,"status":"skipped"},"step":{"line":13,"prefix":"And","index":4,"text":"match response.token == '#notnull'"}},{"result":{"nanos":0,"startTime":1743288793061,"endTime":1743288793061,"millis":0.0,"status":"skipped"},"step":{"line":14,"prefix":"And","index":5,"text":"match response.role == 'ROLE_ADMIN'"}},{"result":{"nanos":0,"startTime":1743288793061,"endTime":1743288793061,"millis":0.0,"status":"skipped"},"step":{"line":15,"prefix":"And","index":6,"text":"match response.userId == '#number'"}},{"result":{"nanos":0,"startTime":1743288793061,"endTime":1743288793061,"millis":0.0,"status":"skipped"},"step":{"line":17,"prefix":"*","index":7,"text":"def authToken = response.token"}},{"result":{"nanos":0,"startTime":1743288793061,"endTime":1743288793061,"millis":0.0,"status":"skipped"},"step":{"line":18,"prefix":"*","index":8,"text":"def adminUserId = response.userId"}}],"line":8,"description":"","durationMillis":412.7517,"failed":true,"error":"http call failed after 248 milliseconds for url: http:\/\/localhost:9091\/api\/auth\/login\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9091 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused: getsockopt\nclasspath:com\/tus\/finance\/karate\/auth.feature:11","executorName":"main","name":"Successful login with admin credentials","startTime":1743288792639,"refId":"[1:8]","endTime":1743288793061,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":637500,"startTime":1743288793080,"endTime":1743288793081,"millis":0.6375,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url 'http:\/\/localhost:9091'"}},{"result":{"nanos":209600,"startTime":1743288793080,"endTime":1743288793080,"millis":0.2096,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"configure headers = { 'Content-Type': 'application\/json' }"}},{"result":{"nanos":398300,"startTime":1743288793081,"endTime":1743288793081,"millis":0.3983,"status":"passed"},"step":{"line":21,"prefix":"Given","index":0,"text":"path '\/api\/auth\/login'"}},{"result":{"nanos":186500,"startTime":1743288793081,"endTime":1743288793081,"millis":0.1865,"status":"passed"},"step":{"line":22,"prefix":"And","index":1,"text":"request { email: 'keerthi@example.com', password: 'keerthi123' }  # Use valid user credentials"}},{"result":{"nanos":3874400,"errorMessage":"http call failed after 3 milliseconds for url: http:\/\/localhost:9091\/api\/auth\/login\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9091 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused: getsockopt\nclasspath:com\/tus\/finance\/karate\/auth.feature:23","startTime":1743288793081,"endTime":1743288793085,"millis":3.8744,"status":"failed"},"step":{"line":23,"prefix":"When","index":2,"text":"method post"},"stepLog":"22:53:13.085 org.apache.http.conn.HttpHostConnectException: Connect to localhost:9091 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused: getsockopt, http call failed after 3 milliseconds for url: http:\/\/localhost:9091\/api\/auth\/login\n22:53:13.085 classpath:com\/tus\/finance\/karate\/auth.feature:23\nWhen method post\nhttp call failed after 3 milliseconds for url: http:\/\/localhost:9091\/api\/auth\/login\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9091 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused: getsockopt\nclasspath:com\/tus\/finance\/karate\/auth.feature:23\n"},{"result":{"nanos":0,"startTime":1743288793085,"endTime":1743288793085,"millis":0.0,"status":"skipped"},"step":{"line":24,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":0,"startTime":1743288793085,"endTime":1743288793085,"millis":0.0,"status":"skipped"},"step":{"line":25,"prefix":"And","index":4,"text":"match response.token == '#notnull'"}},{"result":{"nanos":0,"startTime":1743288793085,"endTime":1743288793085,"millis":0.0,"status":"skipped"},"step":{"line":26,"prefix":"And","index":5,"text":"match response.role == 'ROLE_USER'"}},{"result":{"nanos":0,"startTime":1743288793085,"endTime":1743288793085,"millis":0.0,"status":"skipped"},"step":{"line":27,"prefix":"And","index":6,"text":"match response.userId == '#number'"}},{"result":{"nanos":0,"startTime":1743288793085,"endTime":1743288793085,"millis":0.0,"status":"skipped"},"step":{"line":29,"prefix":"*","index":7,"text":"def userToken = response.token"}},{"result":{"nanos":0,"startTime":1743288793085,"endTime":1743288793085,"millis":0.0,"status":"skipped"},"step":{"line":30,"prefix":"*","index":8,"text":"def regularUserId = response.userId"}}],"line":20,"description":"","durationMillis":5.3063,"failed":true,"error":"http call failed after 3 milliseconds for url: http:\/\/localhost:9091\/api\/auth\/login\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9091 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused: getsockopt\nclasspath:com\/tus\/finance\/karate\/auth.feature:23","executorName":"main","name":"Successful login with user credentials","startTime":1743288793080,"refId":"[2:20]","endTime":1743288793085,"exampleIndex":-1},{"sectionIndex":2,"stepResults":[{"result":{"nanos":293000,"startTime":1743288793097,"endTime":1743288793097,"millis":0.293,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url 'http:\/\/localhost:9091'"}},{"result":{"nanos":175600,"startTime":1743288793097,"endTime":1743288793097,"millis":0.1756,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"configure headers = { 'Content-Type': 'application\/json' }"}},{"result":{"nanos":126700,"startTime":1743288793097,"endTime":1743288793097,"millis":0.1267,"status":"passed"},"step":{"line":33,"prefix":"Given","index":0,"text":"path '\/api\/auth\/login'"}},{"result":{"nanos":226500,"startTime":1743288793097,"endTime":1743288793097,"millis":0.2265,"status":"passed"},"step":{"line":34,"prefix":"And","index":1,"text":"request { email: 'wrong@example.com', password: 'wrong' }"}},{"result":{"nanos":4670200,"errorMessage":"http call failed after 5 milliseconds for url: http:\/\/localhost:9091\/api\/auth\/login\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9091 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused: getsockopt\nclasspath:com\/tus\/finance\/karate\/auth.feature:35","startTime":1743288793097,"endTime":1743288793102,"millis":4.6702,"status":"failed"},"step":{"line":35,"prefix":"When","index":2,"text":"method post"},"stepLog":"22:53:13.102 org.apache.http.conn.HttpHostConnectException: Connect to localhost:9091 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused: getsockopt, http call failed after 5 milliseconds for url: http:\/\/localhost:9091\/api\/auth\/login\n22:53:13.103 classpath:com\/tus\/finance\/karate\/auth.feature:35\nWhen method post\nhttp call failed after 5 milliseconds for url: http:\/\/localhost:9091\/api\/auth\/login\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9091 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused: getsockopt\nclasspath:com\/tus\/finance\/karate\/auth.feature:35\n"},{"result":{"nanos":0,"startTime":1743288793103,"endTime":1743288793103,"millis":0.0,"status":"skipped"},"step":{"line":36,"prefix":"Then","index":3,"text":"status 401"}}],"line":32,"description":"","durationMillis":5.492,"failed":true,"error":"http call failed after 5 milliseconds for url: http:\/\/localhost:9091\/api\/auth\/login\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9091 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused: getsockopt\nclasspath:com\/tus\/finance\/karate\/auth.feature:35","executorName":"main","name":"Login with invalid credentials should fail","startTime":1743288793097,"refId":"[3:32]","endTime":1743288793103,"exampleIndex":-1},{"sectionIndex":3,"stepResults":[{"result":{"nanos":861000,"startTime":1743288793113,"endTime":1743288793114,"millis":0.861,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url 'http:\/\/localhost:9091'"}},{"result":{"nanos":286200,"startTime":1743288793114,"endTime":1743288793114,"millis":0.2862,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"configure headers = { 'Content-Type': 'application\/json' }"}},{"result":{"nanos":301300,"startTime":1743288793114,"endTime":1743288793114,"millis":0.3013,"status":"passed"},"step":{"line":39,"prefix":"Given","index":0,"text":"path '\/api\/auth\/login'"}},{"result":{"nanos":319900,"startTime":1743288793115,"endTime":1743288793115,"millis":0.3199,"status":"passed"},"step":{"line":40,"prefix":"And","index":1,"text":"request { email: 'kala@example.com', password: 'kala123' }"}},{"result":{"nanos":5937200,"errorMessage":"http call failed after 5 milliseconds for url: http:\/\/localhost:9091\/api\/auth\/login\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9091 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused: getsockopt\nclasspath:com\/tus\/finance\/karate\/auth.feature:41","startTime":1743288793115,"endTime":1743288793121,"millis":5.9372,"status":"failed"},"step":{"line":41,"prefix":"When","index":2,"text":"method post"},"stepLog":"22:53:13.121 org.apache.http.conn.HttpHostConnectException: Connect to localhost:9091 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused: getsockopt, http call failed after 5 milliseconds for url: http:\/\/localhost:9091\/api\/auth\/login\n22:53:13.121 classpath:com\/tus\/finance\/karate\/auth.feature:41\nWhen method post\nhttp call failed after 5 milliseconds for url: http:\/\/localhost:9091\/api\/auth\/login\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9091 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused: getsockopt\nclasspath:com\/tus\/finance\/karate\/auth.feature:41\n"},{"result":{"nanos":0,"startTime":1743288793121,"endTime":1743288793121,"millis":0.0,"status":"skipped"},"step":{"line":42,"prefix":"Then","index":3,"text":"status 403"}},{"result":{"nanos":0,"startTime":1743288793121,"endTime":1743288793121,"millis":0.0,"status":"skipped"},"step":{"comments":["# Or if 200 is correct:"],"line":44,"prefix":"Then","index":4,"text":"status 200"}},{"result":{"nanos":0,"startTime":1743288793121,"endTime":1743288793121,"millis":0.0,"status":"skipped"},"step":{"line":45,"prefix":"And","index":5,"text":"match response contains { token: '#string' }"}},{"result":{"nanos":0,"startTime":1743288793121,"endTime":1743288793121,"millis":0.0,"status":"skipped"},"step":{"line":46,"prefix":"*","index":6,"text":"def userToken = response.token"}}],"line":38,"description":"","durationMillis":7.7056,"failed":true,"error":"http call failed after 5 milliseconds for url: http:\/\/localhost:9091\/api\/auth\/login\norg.apache.http.conn.HttpHostConnectException: Connect to localhost:9091 [localhost\/127.0.0.1, localhost\/0:0:0:0:0:0:0:1] failed: Connection refused: getsockopt\nclasspath:com\/tus\/finance\/karate\/auth.feature:41","executorName":"main","name":"Login with disabled account should be forbidden","startTime":1743288793113,"refId":"[4:38]","endTime":1743288793121,"exampleIndex":-1},{"sectionIndex":4,"stepResults":[{"result":{"nanos":551700,"startTime":1743288793137,"endTime":1743288793138,"millis":0.5517,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url 'http:\/\/localhost:9091'"}},{"result":{"nanos":425900,"startTime":1743288793138,"endTime":1743288793138,"millis":0.4259,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"configure headers = { 'Content-Type': 'application\/json' }"}},{"result":{"nanos":1009600,"startTime":1743288793138,"endTime":1743288793139,"millis":1.0096,"status":"passed"},"step":{"line":49,"prefix":"Given","index":0,"text":"path '\/api\/transactions\/user'"}},{"result":{"nanos":47789600,"errorMessage":"js failed:\n>>>>\n01: 'Bearer ' + userToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"userToken\" is not defined\n- <js>.:program(Unnamed:1)\n\nclasspath:com\/tus\/finance\/karate\/auth.feature:50","startTime":1743288793139,"endTime":1743288793187,"millis":47.7896,"status":"failed"},"step":{"line":50,"prefix":"And","index":1,"text":"header Authorization = 'Bearer ' + userToken"},"stepLog":"22:53:13.188 classpath:com\/tus\/finance\/karate\/auth.feature:50\nAnd header Authorization = 'Bearer ' + userToken\njs failed:\n>>>>\n01: 'Bearer ' + userToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"userToken\" is not defined\n- <js>.:program(Unnamed:1)\n\nclasspath:com\/tus\/finance\/karate\/auth.feature:50\n"},{"result":{"nanos":0,"startTime":1743288793188,"endTime":1743288793188,"millis":0.0,"status":"skipped"},"step":{"line":51,"prefix":"When","index":2,"text":"method get"}},{"result":{"nanos":0,"startTime":1743288793188,"endTime":1743288793188,"millis":0.0,"status":"skipped"},"step":{"line":52,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":0,"startTime":1743288793188,"endTime":1743288793188,"millis":0.0,"status":"skipped"},"step":{"line":53,"prefix":"And","index":4,"text":"match response._embedded.transactions == '#array'"}}],"line":48,"description":"","durationMillis":49.7768,"failed":true,"error":"js failed:\n>>>>\n01: 'Bearer ' + userToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"userToken\" is not defined\n- <js>.:program(Unnamed:1)\n\nclasspath:com\/tus\/finance\/karate\/auth.feature:50","executorName":"main","name":"Get user transactions with valid token","startTime":1743288793137,"refId":"[5:48]","endTime":1743288793188,"exampleIndex":-1},{"sectionIndex":5,"stepResults":[{"result":{"nanos":396800,"startTime":1743288793198,"endTime":1743288793198,"millis":0.3968,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url 'http:\/\/localhost:9091'"}},{"result":{"nanos":232200,"startTime":1743288793198,"endTime":1743288793198,"millis":0.2322,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"configure headers = { 'Content-Type': 'application\/json' }"}},{"result":{"nanos":624400,"startTime":1743288793198,"endTime":1743288793199,"millis":0.6244,"status":"passed"},"step":{"line":56,"prefix":"Given","index":0,"text":"path '\/api\/transactions\/admin'"}},{"result":{"nanos":3944800,"errorMessage":"js failed:\n>>>>\n01: 'Bearer ' + authToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"authToken\" is not defined\n- <js>.:program(Unnamed:1)\n\nclasspath:com\/tus\/finance\/karate\/auth.feature:57","startTime":1743288793199,"endTime":1743288793203,"millis":3.9448,"status":"failed"},"step":{"line":57,"prefix":"And","index":1,"text":"header Authorization = 'Bearer ' + authToken"},"stepLog":"22:53:13.203 classpath:com\/tus\/finance\/karate\/auth.feature:57\nAnd header Authorization = 'Bearer ' + authToken\njs failed:\n>>>>\n01: 'Bearer ' + authToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"authToken\" is not defined\n- <js>.:program(Unnamed:1)\n\nclasspath:com\/tus\/finance\/karate\/auth.feature:57\n"},{"result":{"nanos":0,"startTime":1743288793203,"endTime":1743288793203,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"When","index":2,"text":"method get"}},{"result":{"nanos":0,"startTime":1743288793203,"endTime":1743288793203,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":0,"startTime":1743288793203,"endTime":1743288793203,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"And","index":4,"text":"match response._embedded.transactions == '#array'"}}],"line":55,"description":"","durationMillis":5.1982,"failed":true,"error":"js failed:\n>>>>\n01: 'Bearer ' + authToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"authToken\" is not defined\n- <js>.:program(Unnamed:1)\n\nclasspath:com\/tus\/finance\/karate\/auth.feature:57","executorName":"main","name":"Admin access to all transactions","startTime":1743288793198,"refId":"[6:55]","endTime":1743288793203,"exampleIndex":-1},{"sectionIndex":6,"stepResults":[{"result":{"nanos":301300,"startTime":1743288793213,"endTime":1743288793213,"millis":0.3013,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url 'http:\/\/localhost:9091'"}},{"result":{"nanos":168700,"startTime":1743288793214,"endTime":1743288793214,"millis":0.1687,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"configure headers = { 'Content-Type': 'application\/json' }"}},{"result":{"nanos":120500,"startTime":1743288793214,"endTime":1743288793214,"millis":0.1205,"status":"passed"},"step":{"line":63,"prefix":"Given","index":0,"text":"path '\/api\/transactions\/admin'"}},{"result":{"nanos":1988300,"errorMessage":"js failed:\n>>>>\n01: 'Bearer ' + userToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"userToken\" is not defined\n- <js>.:program(Unnamed:1)\n\nclasspath:com\/tus\/finance\/karate\/auth.feature:64","startTime":1743288793214,"endTime":1743288793216,"millis":1.9883,"status":"failed"},"step":{"line":64,"prefix":"And","index":1,"text":"header Authorization = 'Bearer ' + userToken"},"stepLog":"22:53:13.218 classpath:com\/tus\/finance\/karate\/auth.feature:64\nAnd header Authorization = 'Bearer ' + userToken\njs failed:\n>>>>\n01: 'Bearer ' + userToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"userToken\" is not defined\n- <js>.:program(Unnamed:1)\n\nclasspath:com\/tus\/finance\/karate\/auth.feature:64\n"},{"result":{"nanos":0,"startTime":1743288793218,"endTime":1743288793218,"millis":0.0,"status":"skipped"},"step":{"line":65,"prefix":"When","index":2,"text":"method get"}},{"result":{"nanos":0,"startTime":1743288793218,"endTime":1743288793218,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"Then","index":3,"text":"status 403"}}],"line":62,"description":"","durationMillis":2.5788,"failed":true,"error":"js failed:\n>>>>\n01: 'Bearer ' + userToken\n<<<<\norg.graalvm.polyglot.PolyglotException: ReferenceError: \"userToken\" is not defined\n- <js>.:program(Unnamed:1)\n\nclasspath:com\/tus\/finance\/karate\/auth.feature:64","executorName":"main","name":"Regular user trying to access admin endpoint should be forbidden","startTime":1743288793213,"refId":"[7:62]","endTime":1743288793218,"exampleIndex":-1}],"callDepth":0,"name":"Authentication API Tests","description":"","resultDate":"2025-03-29 10:53:13 pm","durationMillis":488.8094,"passedCount":0}